apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: keptn-analysis
  annotations:
    argocd.argoproj.io/sync-options: Force=true,Replace=true  
spec:
  validationFailureAction: Audit
  rules:
    - name: keptn-analysis-success
      match:
        any:
        # AND across kinds and namespaceSelector
        - resources:
            # OR inside list of kinds
            kinds:
            - Analysis
            operations:
            - UPDATE
            selector:
              matchLabels:
                generate.kyverno.io/policy-name: load-test-completed
      validate:
        message: "Analysis needs to be passed."
        pattern:
          status:
            pass: "true"